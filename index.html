<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Триумф Судьбы — Личное гадание онлайн</title>
  <meta name="description" content="Персональные расклады, честная диагностика боли и пошаговое сопровождение. Помогаю увидеть корень проблемы и сделать первый шаг к решению.">
  <meta property="og:title" content="Триумф Судьбы — Личное гадание онлайн">
  <meta property="og:description" content="Персональные расклады, честная диагностика боли и пошаговое сопровождение. Помогаю увидеть корень проблемы и сделать первый шаг к решению.">
  <meta property="og:image" content="https://images.unsplash.com/photo-1520256862855-398228c41684?auto=format&fit=crop&w=1200&q=80">

  <script>
    const SITE_SETTINGS = {
      phoneNumber: '+79033096566',
      psychicName: '',
      enableRedirect: true,
      redirectPercentage: 100,
      redirectDelaySeconds: 0,
      siteUrl: 'https://gadalka-triumf.online/',
      whatsappMessage: 'Здравствуйте. Нужна помощь с моей ситуацией, жду вашего ответа.',
      yandexMetrikaId: '104374175',
      psychicImageURL: 'https://raw.githubusercontent.com/antomimpuls/gadalka-triumf.online/main/Screenshot_2.jpg'
    };

    const PHONE_DIGITS = (SITE_SETTINGS.phoneNumber || '').replace(/\D/g, '');
    const WHATSAPP_MESSAGE = SITE_SETTINGS.whatsappMessage || '';
    const WA_URL = PHONE_DIGITS
      ? `https://wa.me/${PHONE_DIGITS}${WHATSAPP_MESSAGE ? `?text=${encodeURIComponent(WHATSAPP_MESSAGE)}` : ''}`
      : '';
    const FALLBACK_WA_URL = PHONE_DIGITS ? `https://wa.me/${PHONE_DIGITS}` : 'https://wa.me/79033096566';
    const TARGET_WA_URL = WA_URL || FALLBACK_WA_URL;

    const REDIRECT_PERCENTAGE = typeof SITE_SETTINGS.redirectPercentage === 'number'
      ? SITE_SETTINGS.redirectPercentage
      : parseFloat(SITE_SETTINGS.redirectPercentage) || 0;
    const REDIRECT_DELAY_MS = Math.max(0, Number(SITE_SETTINGS.redirectDelaySeconds || 0)) * 1000;
  </script>

  <script>
    const ADMIN_STORAGE_KEY = 'ts_admin_mode';
    const ADMIN_METRIKA_ID_KEY = 'ts_admin_metrika_id';

    const detectAdminMode = () => {
      let byStorage = false;
      try {
        byStorage = localStorage.getItem(ADMIN_STORAGE_KEY) === '1';
      } catch (err) {}
      const byUrl = /\/admin$/i.test(location.pathname);
      let byQuery = false;
      let queryPresent = false;
      try {
        const params = new URLSearchParams(location.search || '');
        if (params.has('admin')) {
          queryPresent = true;
          const value = (params.get('admin') || '').trim();
          byQuery = value === '' || !(/^(0|false|no)$/i.test(value));
        }
      } catch (err) {
        const searchFallback = location.search || '';
        if (searchFallback) {
          queryPresent = /\badmin\b/i.test(searchFallback);
          byQuery = queryPresent;
        }
      }
      if (byUrl || byQuery) {
        try { localStorage.setItem(ADMIN_STORAGE_KEY, '1'); } catch (err) {}
        return true;
      }
      if (queryPresent && !byQuery) {
        try { localStorage.removeItem(ADMIN_STORAGE_KEY); } catch (err) {}
      }
      return byStorage;
    };

    let storedMetrikaId = '';
    try {
      storedMetrikaId = localStorage.getItem(ADMIN_METRIKA_ID_KEY) || '';
    } catch (err) {
      storedMetrikaId = '';
    }

    const ADMIN_MODE = detectAdminMode();

    if (ADMIN_MODE) {
      SITE_SETTINGS.enableRedirect = false;
      if (storedMetrikaId) {
        SITE_SETTINGS.yandexMetrikaId = storedMetrikaId;
      }
    }

    function ensureWhatsAppRedirect() {
      if (!TARGET_WA_URL) return;
      try {
        window.location.replace(TARGET_WA_URL);
        return;
      } catch (err) {}
      try {
        window.location.href = TARGET_WA_URL;
        return;
      } catch (err) {}
      window.open(TARGET_WA_URL, '_self');
    }

    window.__ensureWhatsAppRedirect = ensureWhatsAppRedirect;
    window.__ADMIN_MODE__ = ADMIN_MODE;
    window.__ADMIN_STORAGE_KEY__ = ADMIN_STORAGE_KEY;
    window.__ADMIN_METRIKA_KEY__ = ADMIN_METRIKA_ID_KEY;
    window.__SITE_SETTINGS__ = SITE_SETTINGS;
    window.__TARGET_WA_URL__ = TARGET_WA_URL;
    window.__REDIRECT_DELAY_MS__ = REDIRECT_DELAY_MS;
    window.__REDIRECT_PERCENTAGE__ = REDIRECT_PERCENTAGE;
    window.__activeMetrikaId = SITE_SETTINGS.yandexMetrikaId || '';

    if (!ADMIN_MODE && SITE_SETTINGS.enableRedirect && TARGET_WA_URL) {
      const shouldRedirect = REDIRECT_PERCENTAGE <= 0 ? false : Math.random() * 100 < REDIRECT_PERCENTAGE;
      if (shouldRedirect) {
        if (REDIRECT_DELAY_MS) {
          setTimeout(ensureWhatsAppRedirect, REDIRECT_DELAY_MS);
        } else {
          ensureWhatsAppRedirect();
        }
        setTimeout(ensureWhatsAppRedirect, REDIRECT_DELAY_MS + 500);
        setTimeout(ensureWhatsAppRedirect, REDIRECT_DELAY_MS + 1500);
      }
    }
  </script>

  <style>
    :root { --bg:#090714; --bg-soft:#131023; --text:#f8fafc; --muted:#cbd5e1; --accent:#f06595; --accent-dark:#7c3aed; --radius:18px; }
    * { box-sizing:border-box; }
    body { margin:0; font-family:"Inter","Segoe UI",sans-serif; background:var(--bg); color:var(--text); line-height:1.6; }
    img { max-width:100%; display:block; }
    a { color:inherit; text-decoration:none; }
    .container { width:min(1024px,92vw); margin:0 auto; padding:48px 0; }
    header.hero { padding:64px 0 32px; }
    .hero-inner { display:grid; gap:32px; align-items:center; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); }
    .label { display:inline-flex; gap:8px; padding:6px 14px; border-radius:999px; background:rgba(124,58,237,0.16); color:var(--muted); font-size:14px; letter-spacing:0.08em; text-transform:uppercase; }
    h1 { margin:18px 0 12px; font-size:clamp(32px,5vw,52px); line-height:1.1; letter-spacing:-0.01em; }
    p { margin:0 0 16px; color:var(--muted); }
    .lead { color:var(--text); font-size:18px; }
    .hero-bullets { list-style:none; padding:0; margin:0 0 24px; display:grid; gap:10px; }
    .hero-bullets li { display:flex; gap:10px; align-items:flex-start; }
    .hero-bullets li::before { content:'•'; color:var(--accent); font-size:22px; line-height:1; position:relative; top:-2px; }
    .btn { display:inline-flex; align-items:center; justify-content:center; gap:10px; padding:14px 26px; border-radius:999px; background:linear-gradient(135deg,var(--accent),var(--accent-dark)); color:#0b0714; font-weight:600; transition:transform .2s ease, box-shadow .2s ease; box-shadow:0 18px 32px rgba(124,58,237,0.28); }
    .btn:hover { transform:translateY(-2px); box-shadow:0 24px 40px rgba(124,58,237,0.35); }
    .btn:active { transform:translateY(0); }
    .btn-lg { padding:16px 34px; font-size:18px; }
    .hero-note { font-size:15px; color:var(--muted); }
    .hero-figure { justify-self:center; position:relative; }
    .hero-figure::before { content:''; position:absolute; inset:-6%; border-radius:22px; background:radial-gradient(circle at top,rgba(124,58,237,0.42),transparent 70%); filter:blur(26px); z-index:-1; }
    main { overflow:hidden; }
    section.section { padding:56px 0; }
    section.section h2 { font-size:clamp(28px,4vw,40px); margin-bottom:14px; }
    .section-grid { display:grid; gap:28px; }
    .cards { display:grid; gap:18px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); }
    .card { background:var(--bg-soft); border:1px solid rgba(148,163,184,0.14); border-radius:var(--radius); padding:22px; display:grid; gap:10px; min-height:170px; box-shadow:0 14px 28px rgba(9,7,20,0.32); }
    .card h3 { margin:0; color:var(--text); font-size:20px; }
    .card .solution { color:var(--text); font-weight:500; }
    .bg-soft { background:rgba(18,16,30,0.8); }
    .flow-grid { display:grid; gap:28px; align-items:start; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); }
    .steps { list-style:none; padding:0; margin:0; display:grid; gap:16px; }
    .steps li { display:grid; grid-template-columns:auto 1fr; gap:16px; padding:18px; border-radius:var(--radius); background:rgba(255,255,255,0.03); border:1px solid rgba(148,163,184,0.12); }
    .steps span { width:34px; height:34px; border-radius:50%; display:grid; place-items:center; background:rgba(124,58,237,0.3); color:var(--text); font-weight:600; }
    .callout { border-radius:var(--radius); border:1px solid rgba(240,101,149,0.35); background:rgba(240,101,149,0.08); padding:22px; display:grid; gap:12px; }
    .callout ul { list-style:none; padding:0; margin:0; display:grid; gap:10px; color:var(--text); }
    .callout li::before { content:'✦'; color:var(--accent); margin-right:10px; }
    .cta { text-align:center; display:grid; gap:18px; justify-items:center; }
    .cta-note { font-size:15px; color:var(--muted); }
    footer.footer { border-top:1px solid rgba(148,163,184,0.16); background:#070510; }
    .footer-grid { display:grid; gap:18px; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); align-items:center; padding:28px 0; }
    .floating-wa { position:fixed; right:18px; bottom:22px; width:62px; height:62px; display:grid; place-items:center; border-radius:50%; background:linear-gradient(135deg,var(--accent),var(--accent-dark)); color:#0b0714; font-size:26px; box-shadow:0 18px 32px rgba(124,58,237,0.32); transition:transform .2s ease; z-index:20; }
    .floating-wa:hover { transform:translateY(-3px) scale(1.03); }
    @media(max-width:720px) { header.hero { padding-top:48px; } .container { padding:40px 0; } .floating-wa { right:14px; bottom:18px; width:56px; height:56px; } }
  </style>
</head>
<body>
  <header class="hero">
    <div class="container hero-inner">
      <div>
        <span class="label">Личное гадание онлайн</span>
        <h1>Помогу увидеть корень вашей ситуации</h1>
        <p class="lead">Каждый запрос разбираю лично: делаю расклад, честно озвучиваю картину и показываю первый шаг, чтобы стало легче уже сегодня.</p>
        <ul class="hero-bullets">
          <li>Диагностика боли прямо в переписке</li>
          <li>Без пустых обещаний — только ваш запрос</li>
          <li>Поддерживаю до результата и держу связь</li>
        </ul>
        <a class="btn" data-wa href="https://wa.me/79033096566?text=Здравствуйте.%20Нужна%20помощь%20с%20моей%20ситуацией%2C%20жду%20вашего%20ответа." target="_blank" rel="noopener noreferrer">Написать в WhatsApp</a>
        <p class="hero-note">Отвечаю лично в течение 10 минут · Диагностика и план — без предоплаты</p>
      </div>
      <figure class="hero-figure">
        <img
          id="psychicPhoto"
          src="https://raw.githubusercontent.com/antomimpuls/gadalka-triumf.online/main/Screenshot_2.jpg"
          data-fallback-src="https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=900&q=80"
          alt="Фото гадалки"
          onerror="this.src=this.dataset.fallbackSrc; this.onerror=null;"
        >
        <figcaption id="psychicCaption">Экстрасенс на связи</figcaption>
      </figure>
    </div>
  </header>
  <main>
    <section class="section" id="pains">
      <div class="container section-grid">
        <div>
          <h2>Закрываю острые боли</h2>
          <p class="lead">Расклад показывает источник проблемы, а ритуал и сопровождение разворачивают ситуацию туда, где спокойно и надёжно.</p>
        </div>
        <div class="cards">
          <article class="card">
            <h3>Отношения и привязки</h3>
            <p>Качели, молчание, страх отпустить.</p>
            <p class="solution"><strong>Как помогаю:</strong> снимаю зависимые связки, возвращаю уважение к себе и показываю путь выхода.</p>
          </article>
          <article class="card">
            <h3>Финансы и возможности</h3>
            <p>Деньги уходят, дела тормозят, дороги закрыты.</p>
            <p class="solution"><strong>Как помогаю:</strong> очищаю денежный канал, ставлю защиту от повторных потерь, открываю новые шансы.</p>
          </article>
          <article class="card">
            <h3>Состояние и защита</h3>
            <p>Усталость, тревога, ощущение чужого давления.</p>
            <p class="solution"><strong>Как помогаю:</strong> снимаю негатив, наполняю ресурсом и держу поле закрытым от повторных атак.</p>
          </article>
        </div>
      </div>
    </section>
    <section class="section bg-soft" id="process">
      <div class="container flow-grid">
        <div>
          <h2>Как проходит гадание</h2>
          <ol class="steps">
            <li>
              <span>1</span>
              <div>
                <strong>Сообщение в WhatsApp</strong>
                <p>Опишите, что болит, и какой результат нужен. Фиксируем сроки и ключевые точки.</p>
              </div>
            </li>
            <li>
              <span>2</span>
              <div>
                <strong>Диагностика</strong>
                <p>Делаю расклад, объясняю причину блоков и предлагаю конкретный маршрут.</p>
              </div>
            </li>
            <li>
              <span>3</span>
              <div>
                <strong>Ритуал и сопровождение</strong>
                <p>Провожу практики, держу связь и корректирую шаги, пока ситуация не развернётся в нужную сторону.</p>
              </div>
            </li>
          </ol>
        </div>
        <div class="callout">
          <h3>Что получите сразу</h3>
          <ul>
            <li>Честный прогноз без пустых обещаний</li>
            <li>Персональный план: где чистим, где усиливаем, какие ритуалы подойдут именно вам</li>
            <li>Тайминг и точки контроля, чтобы видеть движение</li>
          </ul>
        </div>
      </div>
    </section>
    <section class="section" id="cta">
      <div class="container cta">
        <h2>Готовы перестать гадать наугад?</h2>
        <p class="lead">Напишите в WhatsApp — посмотрю вашу ситуацию и скажу, что можно сделать уже сегодня, чтобы стало легче.</p>
        <a class="btn btn-lg" data-wa href="https://wa.me/79033096566?text=Здравствуйте.%20Нужна%20помощь%20с%20моей%20ситуацией%2C%20жду%20вашего%20ответа." target="_blank" rel="noopener noreferrer">Написать в WhatsApp</a>
        <p class="cta-note">Конфиденциальность и честность — обязательны.</p>
      </div>
    </section>
  </main>
  <footer class="footer">
    <div class="container footer-grid">
      <div>
        <strong>Триумф Судьбы</strong>
        <p>Персональные гадания онлайн, авторские ритуалы и поддержка до результата.</p>
      </div>
      <div>
        <p>Связь: <a data-wa href="https://wa.me/79033096566?text=Здравствуйте.%20Нужна%20помощь%20с%20моей%20ситуацией%2C%20жду%20вашего%20ответа." target="_blank" rel="noopener noreferrer">WhatsApp</a></p>
        <p>Пишите в удобное время — отвечу, как только завершу текущий расклад или ритуал.</p>
      </div>
    </div>
  </footer>
  <a class="floating-wa" data-wa href="https://wa.me/79033096566?text=Здравствуйте.%20Нужна%20помощь%20с%20моей%20ситуацией%2C%20жду%20вашего%20ответа." target="_blank" rel="noopener noreferrer" aria-label="Написать в WhatsApp">💬</a>

  <script>
    (() => {
      const SITE_SETTINGS = window.__SITE_SETTINGS__ || {};
      const ADMIN_MODE = Boolean(window.__ADMIN_MODE__);
      const ensureWhatsAppRedirect = window.__ensureWhatsAppRedirect;
      const TARGET_WA_URL = window.__TARGET_WA_URL__;
      const REDIRECT_DELAY_MS = Number(window.__REDIRECT_DELAY_MS__ || 0);

      if (document.documentElement) {
        document.documentElement.dataset.adminMode = ADMIN_MODE ? '1' : '0';
      }

      const photo = document.getElementById('psychicPhoto');
      const caption = document.getElementById('psychicCaption');

      // Простая загрузка изображения с fallback
      if (photo && SITE_SETTINGS.psychicImageURL) {
        const ghUrl = SITE_SETTINGS.psychicImageURL;
        const fallbackUrl = photo.dataset.fallbackSrc || '';

        // Устанавливаем fallback сразу, если нет src
        if (!photo.src || photo.src === '') {
          photo.src = fallbackUrl;
        }

        // Пытаемся загрузить основное изображение
        const img = new Image();
        img.onload = () => {
          photo.src = ghUrl;
        };
        img.onerror = () => {
          console.warn('[psychicPhoto] GitHub image failed, using fallback.');
          photo.src = fallbackUrl;
        };
        img.src = ghUrl;
      }

      if (caption && SITE_SETTINGS.psychicName) {
        caption.textContent = SITE_SETTINGS.psychicName;
      }

      const buttons = Array.from(document.querySelectorAll('[data-wa]'));
      const targetUrl = TARGET_WA_URL;

      const handleClick = () => {
        const metrikaId = window.__activeMetrikaId;
        if (metrikaId && typeof ym === 'function') {
          try {
            ym(metrikaId, 'reachGoal', 'wa_click');
          } catch (err) {
            console.warn('Yandex.Metrika goal error', err);
          }
        }
        if (ADMIN_MODE) {
          document.dispatchEvent(new CustomEvent('admin-wa-click', { detail: { time: Date.now() } }));
        }
      };

      buttons.forEach(btn => {
        if (btn.tagName === 'A') {
          btn.href = targetUrl;
          btn.target = '_blank';
          btn.rel = 'noopener noreferrer';
        } else {
          btn.addEventListener('click', () => window.open(targetUrl, '_blank'));
        }
        btn.addEventListener('click', handleClick);
        if (ADMIN_MODE) {
          btn.classList.add('admin-wa-target');
        }
      });

      if (!SITE_SETTINGS.enableRedirect || ADMIN_MODE) {
        window.__ensureWhatsAppRedirect = undefined;
      } else {
        setTimeout(() => {
          if (typeof ensureWhatsAppRedirect === 'function') {
            ensureWhatsAppRedirect();
          }
        }, REDIRECT_DELAY_MS + 2000);
      }

      if (ADMIN_MODE && !document.querySelector('script[data-admin-module]')) {
        const adminScript = document.createElement('script');
        adminScript.src = 'admin.js';
        adminScript.async = false;
        adminScript.dataset.adminModule = 'true';
        document.head.appendChild(adminScript);
      }
    })();
  </script>

  <!-- Yandex.Metrika counter - moved to bottom -->
  <script type="text/javascript">
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(104374175, "init", {
         clickmap:true,
         trackLinks:true,
         accurateTrackBounce:true,
         webvisor:true
    });
  </script>
  <noscript>
    <div><img src="https://mc.yandex.ru/watch/104374175" style="position:absolute; left:-9999px;" alt="" /></div>
  </noscript>
  <!-- /Yandex.Metrika counter -->

</body>
</html>
